<view class="container" wx:if="{{reading}}">
  <view class="screen-shell result-shell">
    <view class="screen-header">
      <view class="header-pill">{{reading.spreadLabel}}</view>
      <view class="title result-title">本次占卜结果</view>
      <view class="subtitle">{{reading.createdAt}}</view>
    </view>

    <view class="panel-card" wx:if="{{reading.question}}">
      <view class="label compact">占卜问题</view>
      <view class="question-text">{{reading.question}}</view>
    </view>

    <view class="spotlight" wx:if="{{displayCards.length}}">
      <view class="spotlight-top">
        <view class="spotlight-position">{{displayCards[activeIndex].position}}</view>
        <view class="spotlight-orientation {{displayCards[activeIndex].reversed ? 'reversed' : 'upright'}}">
          {{displayCards[activeIndex].orientation}}
        </view>
      </view>
      <view class="spotlight-name">{{displayCards[activeIndex].name}}</view>
      <view class="spotlight-keywords">关键词：{{displayCards[activeIndex].keywords}}</view>
      <view class="spotlight-advice">建议：{{displayCards[activeIndex].advice}}</view>
    </view>

    <view class="subtitle hint">左右滑动切换牌面</view>
    <scroll-view class="spread-scroll" scroll-x="true" enable-flex="true" show-scrollbar="false">
      <view class="spread-cards">
        <view
          class="spread-card {{activeIndex === index ? 'active' : ''}}"
          wx:for="{{displayCards}}"
          wx:key="index"
          data-index="{{index}}"
          bindtap="onSelectCard"
        >
          <view class="card-position">{{item.position}}</view>
          <view class="card-name">{{item.name}}</view>
          <view class="card-tag {{item.reversed ? 'reversed' : 'upright'}}">{{item.orientation}}</view>
        </view>
      </view>
    </scroll-view>

    <view class="summary-box">
      <view class="summary-title">综合建议</view>
      <view class="summary-text">{{reading.summary}}</view>
    </view>

    <view class="action-grid">
      <button class="primary-btn" bindtap="goAgain">再抽一次</button>
      <button class="secondary-btn" bindtap="saveReading">保存到历史</button>
      <button class="ghost-btn" bindtap="shareReading">分享卡片</button>
    </view>
  </view>
</view>

<view class="container" wx:else>
  <view class="screen-shell result-shell empty">
    <view class="title result-title">暂无占卜结果</view>
    <view class="subtitle">请先返回首页完成抽牌</view>
    <button class="primary-btn fallback-btn" bindtap="goAgain">去占卜</button>
  </view>
</view>
