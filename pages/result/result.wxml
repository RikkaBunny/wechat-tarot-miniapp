<view class="container" wx:if="{{reading}}">
  <view class="screen-shell result-shell">
    <view class="title result-title">{{reading.spreadLabel}}结果</view>
    <view class="question-box" wx:if="{{reading.question}}">
      <view class="question-label">占卜问题</view>
      <view class="question-text">{{reading.question}}</view>
    </view>

    <view class="subtitle">过去 / 现在 / 未来，请左右滑动查看牌面</view>
    <scroll-view class="spread-scroll" scroll-x="true" enable-flex="true" show-scrollbar="false">
      <view class="spread-cards">
        <view
          class="spread-card {{activeIndex === index ? 'active' : ''}}"
          wx:for="{{displayCards}}"
          wx:key="index"
          data-index="{{index}}"
          bindtap="onSelectCard"
        >
          <view class="card-position">{{item.position}}</view>
          <view class="card-name">{{item.name}}</view>
          <view class="card-tag {{item.reversed ? 'reversed' : 'upright'}}">{{item.orientation}}</view>
          <view class="card-keywords">{{item.keywords}}</view>
        </view>
      </view>
    </scroll-view>

    <view class="interpretation-title">逐张解读</view>
    <view class="interpretation-item" wx:for="{{displayCards}}" wx:key="index">
      <view class="item-head">
        <view class="item-position">{{item.position}}</view>
        <view class="item-orientation {{item.reversed ? 'reversed' : 'upright'}}">{{item.orientation}}</view>
      </view>
      <view class="item-name">{{item.name}}</view>
      <view class="item-text">关键词：{{item.keywords}}</view>
      <view class="item-text">建议：{{item.advice}}</view>
    </view>

    <view class="summary-box">
      <view class="summary-title">综合建议</view>
      <view class="summary-text">{{reading.summary}}</view>
    </view>

    <view class="action-grid">
      <button class="primary-btn" bindtap="goAgain">再抽一次</button>
      <button class="secondary-btn" bindtap="saveReading">保存到历史</button>
      <button class="ghost-btn" bindtap="shareReading">分享卡片</button>
    </view>
  </view>
</view>

<view class="container" wx:else>
  <view class="screen-shell result-shell empty">
    <view class="title result-title">暂无占卜结果</view>
    <view class="subtitle">请先返回首页完成抽牌</view>
    <button class="primary-btn fallback-btn" bindtap="goAgain">去占卜</button>
  </view>
</view>
